.tiptap-svelte-container {
	--tt-border: var(--border, #e6e2e0);
	--tt-button-hover: color-mix(in srgb, var(--mono) 16%, var(--bg-100));

	--c-grey: #8f9092;
	--c-red: #de5945;
	--c-yellow: #edae1b;
	--c-green: #509411;
	--c-purple: #663399;

	--shadow: 0px 12px 33px 0px rgba(0, 0, 0, 0.06), 0px 3.618px 9.949px 0px rgba(0, 0, 0, 0.04);

	--code-block-bg: hsl(218, 50%, 97%);
	--code-var: #a626a4;
}

.vertical-divider {
	background-color: var(--bg, var(--border));
	width: 1px;
	height: 100%;
}

.tt-button {
	border: 0;
	outline: 0;
	background-color: transparent;
	padding: 0.25rem;
	border-radius: 0.375rem;
	cursor: pointer;
	font-family: var(--font);
	color: inherit;
	&:hover {
		background-color: var(--tt-button-hover);
	}
	&.active {
		color: var(--primary);
		background-color: var(--tt-button-hover);
	}
	&.hovered {
		background-color: var(--tt-button-hover);
	}
}

.tt-shadow-lg {
	box-shadow:
		0px 8px 24px rgba(17, 24, 39, 0.06),
		0px 2px 4px rgba(17, 24, 39, 0.04);
}

.tiptap {
	&:focus-visible {
		outline: none;
	}
	height: 100%;
	border: none;
	border-radius: 0.5rem;
	padding: 0.5rem;
	:first-child {
		margin-top: 0;
	}
	::selection {
		background-color: color-mix(in srgb, var(--primary) 24%, transparent);
	}

	a {
		color: var(--primary);
	}
	img {
		display: block;
		object-fit: cover;
		// height: auto;
		margin: 1.5rem 0;
		max-width: 100%;
		border-radius: 0.375rem;
		margin-inline: auto;
		transition: object-position 0.4s ease;
		&.img-auto-height {
			height: auto;
		}
		&.img-pos-tl {
			object-position: top left;
		}
		&.img-pos-tc {
			object-position: top center;
		}
		&.img-pos-tr {
			object-position: top right;
		}
		&.img-pos-cl {
			object-position: center left;
		}
		&.img-pos-cc {
			object-position: center center;
		}
		&.img-pos-cr {
			object-position: center right;
		}
		&.img-pos-bl {
			object-position: bottom left;
		}
		&.img-pos-bc {
			object-position: bottom center;
		}
		&.img-pos-br {
			object-position: bottom right;
		}

		&.ProseMirror-selectednode {
			outline: 2px solid var(--c-purple);
		}
	}

	table {
		border-collapse: collapse;
		margin: 0;
		overflow: hidden;
		table-layout: fixed;
		width: 100%;

		td,
		th {
			border: 1px solid grey;
			box-sizing: border-box;
			min-width: 1em;
			padding: 6px 8px;
			position: relative;
			vertical-align: top;

			> * {
				margin-bottom: 0;
			}
		}

		th {
			background-color: var(--gray-1);
			font-weight: bold;
			text-align: left;
		}

		.selectedCell:after {
			background: color-mix(in srgb, var(--mono) 12%, transparent);
			content: "";
			left: 0;
			right: 0;
			top: 0;
			bottom: 0;
			pointer-events: none;
			position: absolute;
			z-index: 2;
		}

		.column-resize-handle {
			background-color: var(--c-purple);
			bottom: -2px;
			pointer-events: none;
			position: absolute;
			right: -2px;
			top: 0;
			width: 4px;
		}
	}

	.tableWrapper {
		margin: 1.5rem 0;
		overflow-x: auto;
	}

	p {
		line-height: 150%;
	}

	&.resize-cursor {
		cursor: ew-resize;
		cursor: col-resize;
	}

	h1 {
		font-size: 1.5rem;
		font-weight: 700;
	}
	h2 {
		font-size: 1.25rem;
		font-weight: 600;
	}
	h3 {
		font-size: 1.125rem;
		font-weight: 600;
	}
	ul,
	ol {
		margin: 0;
		padding: 0;
		padding-block: 0.5rem;
		padding-left: 1.25rem;
		display: flex;
		flex-direction: column;
		gap: 0;
		li {
			&::marker {
				// font-weight: 500;
				opacity: 0.5;
				// color: color-mix(in srgb, var(--text) 75%, transparent);
			}
			p {
				line-height: 175%;
				margin: 0;
			}
		}
	}

	blockquote {
		border-left: 3px solid color-mix(in srgb, var(--mono), 50% transparent);
		margin: 1.5rem 0;
		padding-left: 1rem;
	}

	pre {
		background: var(--code-block-bg);
		border-radius: 0.5rem;
		color: var(--text);
		font-family: var(--font-mono), monospace;
		margin: 1.5rem 0;
		padding: 0.75rem 1rem;

		code {
			background: transparent;
			color: inherit;
			font-size: 0.875rem;
			padding: 0;
			tab-size: 2;
			border: 0;
			border-radius: 0;
			-moz-tab-size: 2;

			.hljs-comment,
			.hljs-quote {
				color: var(--c-grey);
			}

			.hljs-variable,
			.hljs-template-variable,
			.hljs-attribute,
			.hljs-tag,
			.hljs-regexp,
			.hljs-link,
			.hljs-name,
			.hljs-selector-id,
			.hljs-selector-class {
				color: var(--c-red);
			}

			.hljs-number,
			.hljs-meta,
			.hljs-built_in,
			.hljs-builtin-name,
			.hljs-literal,
			.hljs-type,
			.hljs-params {
				color: var(--c-yellow);
			}

			.hljs-string,
			.hljs-symbol,
			.hljs-bullet {
				color: var(--c-green);
			}

			.hljs-title,
			.hljs-section {
				color: var(--c-red);
			}

			.hljs-keyword,
			.hljs-selector-tag {
				color: var(--c-purple);
			}

			.hljs-emphasis {
				font-style: italic;
			}

			.hljs-strong {
				font-weight: 700;
			}
		}
	}

	code {
		background: color-mix(in srgb, var(--mono) 12%, transparent);
		border: 1px solid var(--border);
		border-radius: 0.25rem;
		color: var(--text);
		font-size: 0.875rem;
		padding: 0.125rem 0.25rem;
	}

	hr {
		border: none;
		width: 100%;
		height: 2rem;
		position: relative;
		&:before {
			content: "";
			position: absolute;
			top: 50%;
			left: 0;
			width: 100%;
			height: 1px;
			background: var(--border);
		}
		&.ProseMirror-selectednode {
			&:after {
				content: "";
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				width: 100%;
				height: 1.5rem; /* thickness of overlay */
				border-radius: 0.5rem;
				background-color: color-mix(in srgb, var(--c-purple) 12%, transparent);
			}
		}
	}

	.selection {
		display: inline;
		background-color: color-mix(in srgb, var(--primary) 24%, transparent);
	}
}

.tt-tippy {
	.tippy-box {
		color: var(--text);
		margin-top: -0.25rem;
		background-color: var(--contrast);
		color: var(--base);
		padding-inline: 0.25rem;
		border-radius: 0.375rem;
		line-height: 150%;
		font-size: 0.8125rem;
		font-weight: 500;
		text-align: center;
	}
	.tippy-box {
		.kbd-container {
			display: flex;
			flex-wrap: nowrap;
			justify-content: center;
			gap: 2px;
			@media screen and (max-width: 520px) {
				display: none;
			}
			kbd {
				opacity: 0.75;
				line-height: normal;
				font-size: 0.75rem;
				font-weight: 400;
				border: 1px solid color-mix(in srgb, var(--border), 75% transparent);
				border-radius: 0.25rem;
				padding-inline: 2px;
			}
		}
	}
	.tippy-content {
		padding-block: 0.25rem;
		padding-inline: 0.25rem;
	}
}
